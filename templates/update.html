{% extends "base.html" %}

{% block head_stuff %}   
    <title>Update Profile</title>
{% endblock %}

{% block content %}

<h1>Update Your Profile!</h1>
<h2>Change Details</h2>

<!-- beta version: condense code by using for loop -->
<form method="POST" action="{{url_for('update', username = username)}}" autocomplete="on">
    <table>
      <tr>
        <td><label>Username</label></td>
        <td>{{username}}</td>  
      </tr>
      <tr>
        <td><label for="name">Name</label></td>
        <td><input id="name" name='name' value="{{info['name']}}" required></td> 
      </tr>
      
  <tr>
    <td><label for="year">Class Year</label></td>
    <td><select id="year" name="year" required>
            {% for year in ['2021', '2022', '2023', '2024', 'Davis Scholar'] %}
                {% if year == info['classYear']%}
                <option selected> {{year}}</option>
                {% else %}
                <option> {{year}}</option>
                {% endif %}
            {% endfor %}
        </select></td>
</tr>

<tr>
    <td><label for="diningHall">Favorite Dining Hall</label></td>
    <td><select id="diningHall" name="diningHall" required>
            {% for hall in [1, 2, 3, 4, 5] %}
                    {% if hall == info['favoriteDH'] %}
                    <option value= {{hall}} selected> {{names[hall]}}</option>
                    {% else %}
                    <option value= {{hall}}> {{names[hall]}}</option>
                    {% endif %}
            {% endfor %}
        </select></td>
</tr>

    <tr>
        <td><label for="favoriteFood">Favorite Food</label></td>
        <td><input id="favoriteFood" name='favoriteFood' value="{{info['favoriteFood']}}" required></td> 

    </tr>
    <tr>
        <td><label>Food Allergens</label></td>
        <td>
                {% for al in ['none', 'eggs', 'fish', 'milk', 'peanuts', 'shellfish', 'soy', 'tree nut', 'wheat'] %}
                        {% if al in info['allergies'] %}
                        <input type="checkbox"  value={{al}} name="allergens" checked>
                        <label class="pro_checks"> {{al}} </label>
                        {% else %}
                        <input type="checkbox" value={{al}} name="allergens">
                        <label class="pro_checks"> {{al}} </label>
                        {% endif %}
                {% endfor %}
            </td>
    </tr>

    <tr>
        <td><label>Food Preferences</label></td>
        <td class="pro_checks">
                {% for pref in ['none', 'gluten sensitive', 'vegan', 'vegetarian', 'kosher', 'halal'] %}
                        {% if pref in info['preferences'] %}
                        <input type="checkbox" value={{pref}} name="preferences" checked>
                        <label> {{pref}} </label>
                        {% else %}
                        <input type="checkbox" value={{pref}} name="preferences">
                        <label> {{pref}} </label>
                        {% endif %}
                {% endfor %}
            </select></td>
    </tr>
    
    </table>
    <input class= "button" type="submit" name="submit" value="update">

  </form>

{% endblock %}
